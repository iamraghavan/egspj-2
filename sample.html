<!DOCTYPE html>
<html>
<head>
    <title>Contact Form</title>

</head>
<body>
    <h1>Contact Form</h1>
    <form id="contactForm">
        <label for="name">Name</label>
        <input type="text" id="name" name="name" required>

        <label for="email">Email</label>
        <input type="email" id="email" name="email" required>

        <label for="message">Message</label>
        <textarea id="message" name="message" required></textarea>

        <input type="submit" value="Submit">
    </form>

    <style>
h1 {
    text-align: center;
}

form {
    max-width: 400px;
    margin: 0 auto;
}

label, input, textarea {
    display: block;
    margin-bottom: 10px;
}

input[type="submit"] {
    margin-top: 10px;
}

textarea {
    height: 100px;
    resize: vertical;
}

    </style>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-database.js"></script>
    
<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
// Initialize Firebase
var firebaseConfig = {
  apiKey: "AIzaSyC7EsiaYH-tJj-wNEQl8ZrrmdvKCWS7ztY",
      authDomain: "egspj-bumblebees.firebaseapp.com",
      databaseURL: "https://egspj-bumblebees-default-rtdb.firebaseio.com",
      projectId: "egspj-bumblebees",
      storageBucket: "egspj-bumblebees.appspot.com",
      messagingSenderId: "3531307553",
      appId: "1:3531307553:web:162f525f3ed82d7830c160",
      measurementId: "G-6W931XY0SQ"
};

firebase.initializeApp(firebaseConfig);

// Reference to Firebase Realtime Database
var database = firebase.database();

// Handle form submission
var contactForm = document.getElementById('contactForm');
contactForm.addEventListener('submit', function(event) {
    event.preventDefault();

    // Get form values
    var name = document.getElementById('name').value;
    var email = document.getElementById('email').value;
    var message = document.getElementById('message').value;

    // Send email
    sendEmail(name, email, message);

    // Store data in Firebase Realtime Database
    saveData(name, email, message);

    // Reset form
    contactForm.reset();
});

// Send email
function sendEmail(name, email, message) {
    // Configure your email service using your public key
    emailjs.init("pJwMrOQHE7viiRAtn");

    // Compose the email parameters
    var emailParams = {
        from_name: name,
        from_email: email,
        message: message,
        cc: "egspjschool@gmail.com", 
        bcc: "pradeep@bumblebees.co.in"
    };

    // Send the email
    emailjs.send("service_13hnkw7", "template_iaohkfb", emailParams)
        .then(function(response) {
            console.log("Email sent successfully");
        })
        .catch(function(error) {
            console.error("Error sending email:", error);
        });
}


// Store data in Firebase Realtime Database
function saveData(name, email, message) {
    var newMessageRef = database.ref('messages').push();
    newMessageRef.set({
        name: name,
        email: email,
        message: message
    });
    console.log('Data stored in Firebase Realtime Database.');
}

</script>
</body>
</html>
